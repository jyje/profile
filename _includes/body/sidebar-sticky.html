<div class="sidebar-sticky">
  {% comment %}Language detection based on URL path{% endcomment %}
  {% assign lang = 'en' %}
  {% if page.url contains '/ko/' or page.url == '/ko' or page.url == '/ko/' %}
    {% assign lang = 'ko' %}
  {% endif %}

  {% comment %}Store current URL for JavaScript language switching{% endcomment %}

  <div class="sidebar-about">
    {% if site.logo %}
      <a class="no-hover" href="{% if lang == 'ko' %}{{ '/ko/' | relative_url }}{% else %}{{ '/' | relative_url }}{% endif %}" tabindex="-1">
        <img src="{% include_cached smart-url url=site.logo %}" class="avatar" alt="{{ site.short_title | default:site.title }}" width="120" height="120" loading="lazy" />
      </a>
    {% endif %}
    <div class="sidebar-title">
      <h1 class="h1">Jeayoung Jeon</h1>
      <small class="sidebar-username">jyje</small>
    </div>
    {% assign text = site.tagline | default:site.data.strings.site.en.tagline | default:site.description %}
    {% if text %}
      <p class="{% if text.size > 100 %}fine{% endif %}">
        {{ text | markdownify | replace:'<p>','' | replace:'</p>','' }}
      </p>
    {% endif %}
  </div>

  <nav class="sidebar-nav heading" role="navigation">
    {% include body/nav.html lang=lang %}
  </nav>

  {% assign author = site.data.authors.first[1] | default:site.author %}
  <div class="sidebar-social">
    {% include components/social.html author=author %}
  </div>

  {% comment %}Language selector moved to bottom after social links{% endcomment %}
  <div class="sidebar-nav heading" role="navigation">
    <span class="sr-only">Language</span>
    <ul>
      <li>
        <span id="_drawer--opened" class="sidebar-nav-item" style="display: inline-flex; align-items: center; gap: 0.5rem;">
          <a id="lang-en" href="#" class="lang-switch" data-lang="en" title="English" style="text-decoration: none; {% if lang == 'en' %}font-weight: bold;{% endif %}">ðŸ‡ºðŸ‡¸</a>
          <a id="lang-ko" href="#" class="lang-switch" data-lang="ko" title="í•œêµ­ì–´" style="text-decoration: none; {% if lang == 'ko' %}font-weight: bold;{% endif %}">ðŸ‡°ðŸ‡·</a>
        </span>
      </li>
    </ul>
  </div>
</div>
