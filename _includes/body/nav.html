<span class="sr-only">{{ site.data.strings.navigation | default:"Navigation" }}{{ site.data.strings.colon | default:":" }}</span>
<ul>
  {% comment %}Language detection - use passed lang or detect from URL{% endcomment %}
  {% assign current_lang = include.lang | default:'en' %}
  {% if current_lang == blank or current_lang == '' %}
    {% if page.url contains '/ko/' or page.url == '/ko' or page.url == '/ko/' %}
      {% assign current_lang = 'ko' %}
    {% else %}
      {% assign current_lang = 'en' %}
    {% endif %}
  {% endif %}

  {% comment %}Home menu with language-specific URL{% endcomment %}
  <li>
    <a
      href="{% if current_lang == 'ko' %}{{ '/ko/' | relative_url }}{% else %}{{ '/' | relative_url }}{% endif %}"
      class="sidebar-nav-item"
    >
      Home
    </a>
  </li>

  {% comment %}Always use English menu titles, but convert URLs based on current language{% endcomment %}
  {% assign menu_items = site.menu_en %}

  {% for node in menu_items %}
    {% assign url = node.url | default: node.href %}
    {% comment %}Convert URL based on current language{% endcomment %}
    {% if current_lang == 'ko' %}
      {% comment %}Convert English URL to Korean URL{% endcomment %}
      {% assign url = url | replace: '/en/', '/ko/' %}
    {% else %}
      {% comment %}Keep English URL as is{% endcomment %}
      {% assign url = url %}
    {% endif %}
    <li>
      <a
        href="{% include_cached smart-url url=url %}"
        class="sidebar-nav-item {% if node.external %}external{% endif %}"
        {% if node.rel %}rel="{{ node.rel }}"{% endif %}
      >
        {{ node.name | default:node.title }}
      </a>
    </li>
  {% endfor %}
</ul>
